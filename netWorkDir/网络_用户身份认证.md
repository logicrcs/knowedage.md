`WEB页面想要控制登录权限，就必须实现认证功能`

# 认证信息

- 密码：仅用户知道的字符出信息
- 动态令牌：锁定专属设备的一次性密码
- 数字证书：认证终端的信息
- 生物认证：用户具有唯一性的生理信息
- IC卡：个人持有的信息。

# 认证方式

- ***BASIC认证(不常用)***

  1. 需要认证时，服务器返回状态码401 Authorization

     Required 带有WWW-Authenticate首部字段(包含BASIC

     认证方式及Request-URI安全域字符串realm)

  2. 客户端收到401并确认需要BASIC认证，将用户ID及密码

     中间通过冒号(:)连接，再有Base64编码处理。将处理

     后的字符串写入首部字段Authorization后，发给服务

     器。

  3. 服务器接收到包含首部字段Authorization请求，经过

     验证返回客户端所需的资源。

  `BASIC认证问题`

  1. 使用Base64编码，攻击者也可以使用Base64解码，由于

     不存在加密，用户的信息就相当于明文。

  2. 一般浏览器无法实现注销操作。

- ***DIGEST认证(使用受限)***

  1. 需要认证时，服务器返回状态码401 Authorization

     Required 带有WWW-Authenticate首部字段。该字段

     包含质问响应方式认证所需的临时质询码(随机数，

     nonce),首部字段WWW-Authenticate会包含realm和

     `nonce(生成的随机字符串，通常由Base64编码的16进`

     `制数组成)`这两个字段的信息，客户端依赖这两个值进

     行认证。

  2. 客户端收到401并确认需要DIGEST认证，根据首部字段

     WWW-Authenticate中的realm,nonce。生成响应码。

  3. 接受到包含首部字段Authorization的服务器，验证

     信息的正确性。返回客户端所需资源。

  `DIGEST认证问题`

  1. 使用不灵活
  2. 依然达不到安全要求。
  
- ***SSL客户端认证(成本高)***

  `SSL客户端认证是为了防止因用户ID和密码被盗而被冒充登录，`

  `是借由HTTPS的客户端证书完成认证的方式，服务器可确认访`

  `问是否来自已登录的客户端`

  1. 需要认证时，服务器返回Certificate Request报文

     要求客户端提供客户端证书

  2. 用户选择将发送的客户端证书，客户端会把客户端证

     书以Client Certificate报文方式发给服务器。

  3. 服务器验证之后，得到客户端证书内的客户端公开密

     钥，开始HTTPS加密通信。

  **双因素认证**

  一般而言，SSL客户端认证不会只通过证书，一般还会使用

  基于表单认证组合形成一种双因素认证。证书验证SSL客户

  端是正确的计算机。还需用户提供密码认证是用户本人。

  并且由于需要证书，所以这种认证方式也存在一定的成本。

- ***基于表单认证(主流认证方式)***

  `表单认证就不来源于HTTP协议的定义了，而是客户端通过网页`

  `表单向服务器后台发送登录信息，后台对信息进行认证。由于`

  `不是协议本身提供的定义，所以提供的用户界面与认证方式也`

  `各不相同，但在一般情况，用户将用户ID和密码等登录信息发`

  `送给WEB服务器，基于服务器结果来决定认证是否成功。`

  **Session管理及Cookie应用**

  1. 客户端将用户ID和密码等登录信息通过POST方式发

     给服务器。

  2. 服务器对用户创建Session ID，并验证登录信息，将

     认证状态与Session ID绑定后保存在服务器端。使用

     报文首部字段Set-Cookie写入Session ID并将其返

     回给客户端。之后服务器就通过Session ID判断用户，

     `所以，如果Session ID被攻击者知晓，攻击者就可以伪装成`

     `用户进行恶意操作了，为了保证安全，Session ID应使用难`

     `以预测的字符串，并且在服务器端进行有效期管理`。

  3. 客户端收到服务器的Session ID，作为Cookie保存在

     本地，在下次需要请求服务器资源时，就将其发给服务

     器，如果服务器的Session ID没有过期，就无需登录可

     以直接访问资源。
