# 主要不足

- 不加密，内容可能被窃听
- 不验证，用户可能被伪装
- 不校验，无法证明完整，可能被篡改

事实上，其他未加密协议也有这些问题。

## 通信使用明文可能被窃听

**一般使用加密处理防止被窃听**

- 通信加密

  HTTP协议没有加密机制，但使用SSL(Secure Socket Layer,

  安全套接层)或TLS(Transport Layer Security,安全层传输

  协议)，加密HTTP的通信内容。

  用SSL建立安全通信线路之后，在这条线路上进行HTTP通信。

  ***与SSL组合使用的HTTP被称为HTTPS(HTTP Secure)***

  ***即 超文本传输安全协议***

  HTTP over SSL 或是说HTTPS也是目前绝大多数网站使用，

  chrome系浏览器会将HTTP强制转成HTTPS

- 内容加密

  HTTP协议本身没有加密，那么就将HTTP协议传输的内容加密。

  在这种情况下，就是对***报文首部不进行加密处理，对包含内容***

  ***的报文主体进行加密***

  但是，这种机制就要求客户端与服务器同时具有加解密机制，

  并且依然不能防止内容被篡改，毕竟加密本身不能提供校验

  功能。

## 不验证就可以伪装客户端身份

由于任何人均可发起请求，所以服务器端天然在验证客户端身份上存在

困难。故，在客户端IP和端口号没有被服务器拒绝访问的现状下，服务器一经请求就会原路返回一个响应。所以，问题是

***服务器不知道客户端的身份，客户端不知道服务器的身份***

***服务器无法确定客户端的访问权限***

***对DoS(Denial of Service，即拒绝服务器攻击)无能为力***

- 证书服务

  既然HTTP协议无法确定双方身份，那么就可以由第三方提供

  身份验证，由值得信赖的第三方对双方提供身份认证。就像

  现实生活中公民的身份证明，企业的公章，提供认证的就是

  政府一样，借由SSL不仅能够实现加密处理，还能实现证书

  的服务。

## 没有校验，报文安全与完整不能保证

HTTP协议没有校验功能，报文实体的完整与安全就不能保证，在请求

与响应过程中，就可能出现中间人攻击(Man-in-the-Middle attack)

MITM。

***校验完整性***

在一般情况下，提供文件下载的网站同时会提供数字签名(Pretty Good Privacy,完美隐私)，和校验码(MD5生成的散列值)。但是这两种方法均

要求用户自行验证。并且也没办法保证提供的签名和校验码也是对的。

## HTTPS

而在以上三种情况下，就使用了同时拥有加密，认证，完整性保护的

**HTTPS(HTTP Secure)**

`HTTPS是HTTP的通信接口部分使用SSL与TLS协议替换了。HTTP在与TCP通信`

`之前先和SSL通信，由SSL与TCP通信，SSL作为外壳包裹了HTTP`

SSL可以与应用层的许多协议配合使用，实现网络安全技术。

### SSL

- 公开密钥加密技术(Public-key cryptography)

  `加密算法公开，密钥保密`

  其原理就是**共享密钥加密**，也称对称密钥加密。

  (Common key crypto system)

  但是，原先的共享密钥加密存在安全的问题：

  加密与解密使用同一个密钥，只要拿到密钥，谁都能解密。

  那么保证密钥的安全性就格外重要。但是，密钥必须通过

  网络发给需要解密的一方，但在互联网上发密钥，如果通

  信别监听的话，造成密钥落入攻击者的手中，这要就失去

  了加密的意义。

  `而SSL使用的是两把密钥的公开密钥加密`

  使用一对非对称的密钥，一个私有密钥(private key),

  一个公开密钥(public key)。发送密文的一方使用公开密

  钥加密，接收方收到信息后，使用私有密钥进行解密。即

  `所谓非对称密钥就是，公开密钥只能用来加密，私有密钥用来解`

  `密`

  比如你和Google通信时，你可 以使用Google公开提供的

  1024位的公钥加密信息，加密后的密文只有使用Google私

  藏的私钥才可以做解密。

  一般来说，公开密钥算法对于大篇幅的原始数据加密的性

  能不会很高，因此如果是用于大段数据的加密与解密，通

  常还是会使用强度比较高的对称加密算法，而公开密钥算

  法会用于在网络中传输对称加密算法的密钥，两者结合使

  用，发挥各自的优点。

### HTTPS使用混合加密机制

1. 使用公开密钥加密方式安全地交换在稍后的共享密钥加密

   要使用的密钥

2. 确保密钥安全的时候，就可以通过共享密钥加密方式通信

`但仍然存在公开密钥在传输过程中，真正的公开密钥被攻击者替换掉了`

- 使用数字机关认证机构及其相关颁发的公开密钥证书

  (CA,Certificate Authority)

  数字证书认证机构是客户端和服务器双方都信赖的第三方机构

  1. 服务器运营人员向数字证书认证机构提出公开密钥的申请

  2. CA确认申请者身份后，对公开密钥做数字签名，并将密钥

     放入公钥证书

  3. 服务器将由数字证书认证机构颁发的公钥证书发送给客户

     端。

  4. 客户端收到证书，使用数字认证机构的公开密钥`(由于数`

     `字认证机构的公开密钥也必须安全的交给客户端，但又不`

     `仅做数字认证机构套娃，所以大多数浏览器开发商会在浏`

     `览器里植入常用认证机关的公开密钥)`对证书上的数字签

     名进行验证。通过客户端就可以确定数字认证机构的

     可靠性和与证书绑定的密钥的可靠性。


- 可证明组织真实性的EV SSL证书

  EV SSL证书(Extended Validation SSL Certificate)

  基于国际标准的认证指导方针颁发的证书，规定了对运行

  组织是否真实。

### TLS

**TLS是以SSL为原型开发的协议，有时会统称为SSL**

### 总结

`HTTPS缺点`

1. SSL通信部分消耗网络资源，又要对通信进行处理，时间上延

   长了。

2. HTTPS需要做服务器，客户端双方加密及解密处理，会消耗

   CPU与内存等硬件资源。

***存在SSL加速器(专用服务器)为SSL通信专用硬件，提高SSL***

***计算速度，仅在SSL处理时发挥SSL加速器功效。***

**所以在非敏感信息传递的时候就使用传统的HTTP协议来提高速度。**

**并且使用HTTPS通信，证书也至关重要，一年的授权费用对于**

**一些个人网站也并不合算，所以采用HTTP通信方式。**

