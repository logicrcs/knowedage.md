# 服务器

- **虚拟服务器 Virtual Host**

  **通过不同的域名可以运行各自不同的网站。**

  在互联网上，域名借DNS服务解析出IP地址访问目标网站。所以，

  当请求到达服务器时，就已经是IP了。但如果一台服务器托管了

  两个域名，就要能区分访问的时那个域名。

  所以，***客户端在发送HTTP请求的时候，就要在HOST首部指定完***

  ***整的主机名或域名的URI***

- **通信数据转发程序**

  客户端与服务器之间存在着一些用于通信数据转发的应用程序

  配合服务器工资，这些程序能够一环一环的在链路上双向传递

  数据，完成一层层的请求转发。

  1. 代理

     **功能：**有转发功能的代理程序，是服务器与客户端的中间

     人。双向传递数据。

     **行为：**接受客户端的请求转发给其他服务器。不会改变请

     求的URI，直接发往目标服务器。在将目标服务器返回的

     数据传回客户端。但是请求或响应每经过一台代理服务器

     均会被追加写入Via首部信息。

     **结论：**在HTTP通信过程中，可级联多台代理服务器，请求

     或响应会经过数台类似锁链被连接在一起的代理服务器，

     转发时，添加附加的Via首部字段标记经过的主机信息。

     **使用方法：**以两个基准分类

     1. 是否使用缓存

        代理转发响应时，缓存代理(Caching Proxy)

        会预先将资源的副本(缓存)保存在代理服务器

        上，以便下次访问。

     2. 是否会修改报文

        转发请求或响应时，不对报文进行任何加工就

        是透明代理(Transparent Proxy),否则就是

        非透明代理。

     一般用于利用缓存技术减少网络带宽，对特定网站进行访

     问控制，获取访问日志。

  2. 网关

     **功能：**转发其他服务器通信数据的服务器，在客户端看来

     他就像拥有目标资源的源服务器一样。可以使通信线路上

     的服务器提供非HTTP协议服务。

     **应用场景：** 在信道上加密，使用Sql查询数据库，与信用

     卡结算系统联动。

     

  3. 隧道

     **功能：**对距离较远的客户端与服务器进行中转，保持双方

     的通信连接。可按要求建立起一条与其他服务器的信道，使

     用SSL等加密手段进行通信，保证客户端能与服务器进行安

     全通信。隧道不会解析HTTP请求，并且会在通信断开连接时

     结束。

  ***缓存服务器***

  是代理服务器的一种，可以利用缓存避免多次从源服务器转发资

  源，但是缓存也会因为客户端的要求，缓存的有效性等因素，需

  要向源服务器确认资源的有效性，如果判定缓存失效，就再次从

  源服务器上获取数据。而客户端也是可以有缓存的。